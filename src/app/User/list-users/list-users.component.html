<app-header></app-header>
<app-sidebar></app-sidebar>

<div class="container offset-lg-2 offset-md-3 offset-sm-0 offset-0 pl-0 pl-5">

  <div class="d-flex justify-content-between col-12 d-inline-block">
    <h2 class="text-center font-weight-bold">Listes Users</h2>
    <div  class="text-right  font-weight-bold d-flex">
      <input class="form-control mr-sm-2" type="text" placeholder="Search by username" name="search" aria-label="Search"
             [(ngModel)]="search" (ngModelChange)="ToSearch()">
      <a type="button" class="text-right pb-5 font-weight-bold"  routerLink="/addUser">
        <i class="fa fa-user-plus fa-3x"></i>
      </a>
    </div>
  </div>

  <div class="col-lg-12">

    <table class="table table-hover" style="box-shadow: 10px 5px 5px gray;background-color:white">
      <thead class="bg-dark">
      <tr>
        <th scope="col" class="text-white">Avatar</th>
        <th scope="col" class="text-white">Username &nbsp; <i class="fa fa-sort"></i></th>
<!--        <th scope="col" class="text-white">Lastname</th>-->
        <th scope="col" class="text-white">Email</th>
        <th scope="col" class="text-white">Profil</th>
        <th scope="col" class="text-white text-center">Actions</th>
      </tr>
      </thead>
      <tbody >
        <tr *ngFor="let user of users | orderBy: key: reverse | paginate: { id: 'foo',
                                                      itemsPerPage: 5,
                                                      currentPage: page,
                                                      totalItems: totalUsers }" >
          <td scope="row">
              <span *ngIf="user.photo">
                 <img src="data:image/jpeg;base64,{{user.photo }}" class="img-thumbnail"  alt="" style="height: 60px;width: 60px">
              </span>
              <span *ngIf="!user.photo">
                  <img src="assets/img/avatar1.png" class="img-thumbnail"  alt="profil" style="height: 60px;width: 60px">
              </span>
          </td>
<!--            <ng-template #elseBlock>-->
<!--              <td scope="row" *ngIf="user.photo">-->
<!--                <div>-->
<!--                  <img src="data:image/jpeg;base64,{{user.photo }}" class="img-thumbnail"  alt="" style="height: 60px;width: 60px">-->
<!--                </div>-->
<!--              </td>-->
<!--            </ng-template>-->
          <td>{{user?.username | titlecase}}</td>
<!--          <td class="align-content-center">{{user.lastname}}</td>-->
          <td>{{user?.email | lowercase}}</td>
          <td>{{user?.roles | cutString}} </td>
          <td class="float-right ">
            <button class="btn btn-primary  badge-pill" style="width: 80px;" routerLink="/listUsers/{{user.id}}/detail">Details</button>
            <button class="btn btn-dark  badge-pill" style="width: 80px;" routerLink="/editUser/{{user.id}}">Edit</button>
            <button class="btn btn-danger  badge-pill" style="width: 80px;" (click)="deleteUser(user.id)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="d-flex justify-content-center">
        <pagination-controls id="foo" (pageChange)="page = $event"></pagination-controls>
    </div>
  </div>
</div>
